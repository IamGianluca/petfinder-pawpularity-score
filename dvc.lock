schema: '2.0'
stages:
  download_data:
    cmd: kaggle competitions download -c petfinder-pawpularity-score -p data/
    outs:
    - path: data/petfinder-pawpularity-score.zip
      md5: 35dd50bacd33ebba746738508e20e276
      size: 1030728211
  unzip_data:
    cmd: unzip data/petfinder-pawpularity-score.zip -d data/
    deps:
    - path: data/petfinder-pawpularity-score.zip
      md5: 35dd50bacd33ebba746738508e20e276
      size: 1030728211
    outs:
    - path: data/sample_submission.csv
      md5: eed5ebc04c54d5e5130a85a4d81dfc6e
      size: 326
    - path: data/test
      md5: e945e75c5c4c977b08ad644851755e27.dir
      size: 83775
      nfiles: 8
    - path: data/test.csv
      md5: 4e4d1b962044457c29f636cc02716e46
      size: 545
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train.csv
      md5: a7812f42b71d57e77dfc6e05f5cdd865
      size: 594740
  create_folds:
    cmd: python pipe/create_folds.py
    deps:
    - path: data/train_deduped.csv
      md5: a19b722d94bf2f664c9770c4c2e12575
      size: 640790
    - path: pipe/create_folds.py
      md5: 1804828c5e6d78ac07e99599c5683302
      size: 1004
    params:
      params.yaml:
        create_folds:
          seed: 42
          n_folds: 5
    outs:
    - path: data/train_folds_all.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
  train_one:
    cmd: python pipe/train_one.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_one.py
      md5: e464b8921db089e1519eea62d040f287
      size: 5972
    params:
      params.yaml:
        train_one:
          name: one
          seed: 9393
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          arch: swin_large_patch4_window12_384
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: 16
          use_normalize: true
          n_tfms: 2
          magn: 3
          sz: 384
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          lr: 3e-05
          warmup_epochs: 1
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_one_fold0.ckpt
      md5: 6a2b03a6e33e672fcb53126c1f17d5fc
      size: 795416097
    - path: ckpts/model_one_fold1.ckpt
      md5: 4c2f10bedf14aff913f11a072e92d1cf
      size: 795416097
    - path: ckpts/model_one_fold2.ckpt
      md5: 5deb194fb1723f07f0d05fa59aa3f877
      size: 795416097
    - path: ckpts/model_one_fold3.ckpt
      md5: ab3b5e4b66c4b2a591b4da330c97a6ed
      size: 795416097
    - path: ckpts/model_one_fold4.ckpt
      md5: 868348601911c0d855a45ddf9db6c3f9
      size: 795416097
    - path: metrics/model_one.json
      md5: 64a8cabd34305c3294aa5a823bfc9386
      size: 61
    - path: preds/model_one_oof.npy
      md5: a994891f8a5f277692141627b9bc80b6
      size: 79128
  resize_images:
    cmd: python pipe/resize_images.py
    deps:
    - path: data/test
      md5: e945e75c5c4c977b08ad644851755e27.dir
      size: 83775
      nfiles: 8
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: pipe/resize_images.py
      md5: 22b4e2500eb69a98b5f32cd73384fa8e
      size: 854
    params:
      params.yaml:
        resize:
          sz:
          - 224
          - 384
    outs:
    - path: data/test_224/
      md5: 8b2b276f61b204b6d52b9d73191cfd83.dir
      size: 170719
      nfiles: 8
    - path: data/test_384/
      md5: ed7b545ec573e12362fca208e03d60a0.dir
      size: 367783
      nfiles: 8
    - path: data/train_224/
      md5: 3452a5af5bd28029d534ec33b0bd09f4.dir
      size: 97308155
      nfiles: 9912
    - path: data/train_384/
      md5: 3e12f820928b7b6770891beda13b8af2.dir
      size: 236133550
      nfiles: 9912
  train_two:
    cmd: python pipe/train_two.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_two.py
      md5: 94780c0a9535fe930ff8d1d39e452383
      size: 5972
    params:
      params.yaml:
        train_two:
          name: two
          seed: 7591
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          arch: swin_large_patch4_window7_224
          pretrained: true
          epochs: 6
          bs: 64
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 5e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_two_fold0.ckpt
      md5: d7c722510a13c59aa1a3eb927b484a5c
      size: 782575841
    - path: ckpts/model_two_fold1.ckpt
      md5: af20e7eb3387be81d1fede8716206e6b
      size: 782575841
    - path: ckpts/model_two_fold2.ckpt
      md5: cd5b9c919aac01c664d5e197b02d600b
      size: 782575841
    - path: ckpts/model_two_fold3.ckpt
      md5: bc5c7155212f7227729d50dff4a8feaa
      size: 782575841
    - path: ckpts/model_two_fold4.ckpt
      md5: cfbb6c441d02c45352cd6855d28ff07f
      size: 782575841
    - path: metrics/model_two.json
      md5: 1759c60f2c5a937364c4701f12c3ecca
      size: 62
    - path: preds/model_two_oof.npy
      md5: 25b6b349f3c25a1812b39b84287c10f4
      size: 79128
  remove_duplicates:
    cmd: python pipe/remove_duplicate_images.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: pipe/remove_duplicate_images.py
      md5: 6e6f526909266d3a1af7af13c985a3cd
      size: 3931
    outs:
    - path: data/train_deduped.csv
      md5: a19b722d94bf2f664c9770c4c2e12575
      size: 640790
  train_three:
    cmd: python pipe/train_three.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_three.py
      md5: 45901f657d804fd385c2c881295fed64
      size: 5974
    params:
      params.yaml:
        train_three:
          name: three
          seed: 9102
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          arch: xcit_large_24_p8_224_dist
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 3e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_three_fold0.ckpt
      md5: fabed792f76e5611a3f824053a89921e
      size: 753552559
    - path: ckpts/model_three_fold1.ckpt
      md5: 4d1e77588aee32f6010641f776c324da
      size: 753552559
    - path: ckpts/model_three_fold2.ckpt
      md5: 851b257d96188721316c12d734913af3
      size: 753552559
    - path: ckpts/model_three_fold3.ckpt
      md5: c6727f7950f6c500b20322c1e5ce2c38
      size: 753552559
    - path: ckpts/model_three_fold4.ckpt
      md5: 159807b07390c92518edd1df86f0da1f
      size: 753552559
    - path: metrics/model_three.json
      md5: 384eabbb08e32829cfb5d8a40cce9554
      size: 61
    - path: preds/model_three_oof.npy
      md5: 7d328a8c17f6d4536199a9a954b85f97
      size: 79128
  train_four:
    cmd: python pipe/train_four.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_four.py
      md5: 0aae0d7f82a78dca403fec7a7c32ec4e
      size: 5973
    params:
      params.yaml:
        train_four:
          name: four
          seed: 1230
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          arch: cait_s24_224
          pretrained: true
          epochs: 6
          bs: 128
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 0.0001
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_four_fold0.ckpt
      md5: 01c4bf458c6dbe1e6d5975ca77ff66fa
      size: 186584705
    - path: ckpts/model_four_fold1.ckpt
      md5: 00ca31cd7ad9adbc3ee2147080b7c932
      size: 186584705
    - path: ckpts/model_four_fold2.ckpt
      md5: d696e0361dd66628d3cf043232299dd7
      size: 186584705
    - path: ckpts/model_four_fold3.ckpt
      md5: 0ccc7e97da81b1bf251daa12c1c62767
      size: 186584705
    - path: ckpts/model_four_fold4.ckpt
      md5: 965972516c3f48623803957b698dba0f
      size: 186584705
    - path: metrics/model_four.json
      md5: 5fbf169e919ed912d1a0460d0f5fb582
      size: 61
    - path: preds/model_four_oof.npy
      md5: 920dc2f77c815156683ac3166b9d9029
      size: 79128
  ensemble:
    cmd: python pipe/ensemble.py
    deps:
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/ensemble.py
      md5: 9e37b59c04f9c2f989cd206090900f30
      size: 1740
    - path: preds/model_four_oof.npy
      md5: 920dc2f77c815156683ac3166b9d9029
      size: 79128
    - path: preds/model_one_oof.npy
      md5: a994891f8a5f277692141627b9bc80b6
      size: 79128
    - path: preds/model_three_oof.npy
      md5: 7d328a8c17f6d4536199a9a954b85f97
      size: 79128
    - path: preds/model_two_oof.npy
      md5: 25b6b349f3c25a1812b39b84287c10f4
      size: 79128
    params:
      params.yaml:
        ensemble:
          name: ensemble
          seed: 1616
          models:
          - one
          - two
          - three
          - four
          n_folds: 5
    outs:
    - path: ckpts/model_ensemble.joblib
      md5: 1f37789fb10c3714e4b2739d040d7b71
      size: 84831
    - path: metrics/model_ensemble.json
      md5: bb6f90fc9973006e20bb16cbaf942620
      size: 22
  download_extra_data:
    cmd: kaggle competitions download -c petfinder-adoption-prediction -p data/petfinder-adoption-prediction
    outs:
    - path: data/petfinder-adoption-prediction/petfinder-adoption-prediction.zip
      md5: f5d570d05f001c7111ae9d296a776de5
      size: 2083562071
  unzip_extra_data:
    cmd: unzip data/petfinder-adoption-prediction/petfinder-adoption-prediction.zip
      -d data/petfinder-adoption-prediction/
    deps:
    - path: data/petfinder-adoption-prediction/petfinder-adoption-prediction.zip
      md5: f5d570d05f001c7111ae9d296a776de5
      size: 2083562071
    outs:
    - path: data/petfinder-adoption-prediction/BreedLabels.csv
      md5: 2d77f05b9a5f400a879aed75761f2d5c
      size: 6984
    - path: data/petfinder-adoption-prediction/ColorLabels.csv
      md5: 6aa37b90b49305f686b2cf48c41e63a6
      size: 88
    - path: data/petfinder-adoption-prediction/PetFinder-BreedLabels.csv
      md5: 2d77f05b9a5f400a879aed75761f2d5c
      size: 6984
    - path: data/petfinder-adoption-prediction/PetFinder-ColorLabels.csv
      md5: 6aa37b90b49305f686b2cf48c41e63a6
      size: 88
    - path: data/petfinder-adoption-prediction/PetFinder-StateLabels.csv
      md5: 8f325ebd539d5f4d8919c629b11cb88a
      size: 285
    - path: data/petfinder-adoption-prediction/StateLabels.csv
      md5: 8f325ebd539d5f4d8919c629b11cb88a
      size: 285
    - path: data/petfinder-adoption-prediction/breed_labels.csv
      md5: 2d77f05b9a5f400a879aed75761f2d5c
      size: 6984
    - path: data/petfinder-adoption-prediction/color_labels.csv
      md5: 6aa37b90b49305f686b2cf48c41e63a6
      size: 88
    - path: data/petfinder-adoption-prediction/state_labels.csv
      md5: 8f325ebd539d5f4d8919c629b11cb88a
      size: 285
    - path: data/petfinder-adoption-prediction/test/
      md5: 7fd247dc9d00279a2c918e80f8115982.dir
      size: 1694948
      nfiles: 2
    - path: data/petfinder-adoption-prediction/test_images
      md5: a867212f5caaeff7bb4dff513163e931.dir
      size: 391972706
      nfiles: 14465
    - path: data/petfinder-adoption-prediction/test_metadata
      md5: 90581d235d3a0ab63a5487279e5f02e6.dir
      size: 77217658
      nfiles: 14465
    - path: data/petfinder-adoption-prediction/test_sentiment
      md5: db4e84200e60f820144b7e382c673b01.dir
      size: 16509699
      nfiles: 3865
    - path: data/petfinder-adoption-prediction/train/
      md5: 503cab2cc4c5476ed3d3773ea5d69305.dir
      size: 6690166
      nfiles: 1
    - path: data/petfinder-adoption-prediction/train_images/
      md5: 4f5d52211e133269efb0582221b681f6.dir
      size: 1606122052
      nfiles: 58311
    - path: data/petfinder-adoption-prediction/train_metadata
      md5: bd1bbcad90f59319dc3ac4efb7e9d0fb.dir
      size: 312766464
      nfiles: 58311
    - path: data/petfinder-adoption-prediction/train_sentiment
      md5: eec2b1030c8c10a84c4c5f1a979a394a.dir
      size: 67574427
      nfiles: 14442
  organize_extra_images:
    cmd: mkdir data/extra && find data/petfinder-adoption-prediction/ -name '*.jpg'
      -exec cp {} data/extra/ \;
    deps:
    - path: data/petfinder-adoption-prediction/test_images/
      md5: a867212f5caaeff7bb4dff513163e931.dir
      size: 391972706
      nfiles: 14465
    - path: data/petfinder-adoption-prediction/train_images/
      md5: 4f5d52211e133269efb0582221b681f6.dir
      size: 1606122052
      nfiles: 58311
    outs:
    - path: data/extra
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
  resize_extra_images:
    cmd: python pipe/resize_extra_images.py
    deps:
    - path: data/extra/
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
    - path: pipe/resize_extra_images.py
      md5: c336f6f4210ea3cb50f3a0308675cb97
      size: 824
    params:
      params.yaml:
        resize_extra_images:
          sz:
          - 224
          - 384
    outs:
    - path: data/extra_224
      md5: 38167aa44a98fa7a2b33a53c2665327b.dir
      size: 694454778
      nfiles: 72776
    - path: data/extra_384
      md5: f0d0d79586659ba82df50d4314effbc2.dir
      size: 1109231399
      nfiles: 72776
  pseudo_labeling:
    cmd: python pipe/pseudo_label.py
    deps:
    - path: ckpts/model_four_fold0.ckpt
      md5: 78100c60219bd32389c422408f536dce
      size: 186580673
    - path: ckpts/model_four_fold1.ckpt
      md5: 0ff284ccb238ecc3338f08ec6df07c8f
      size: 186580673
    - path: ckpts/model_four_fold2.ckpt
      md5: 7d4f28d43dec906779d66ed6d047d2bf
      size: 186580673
    - path: ckpts/model_four_fold3.ckpt
      md5: f4914b8faf3dd45dbea24fee4ca291db
      size: 186580673
    - path: ckpts/model_four_fold4.ckpt
      md5: 13baa4faeace938e134f100560e7229c
      size: 186580673
    - path: ckpts/model_one_fold0.ckpt
      md5: c48c8ee1206e88abde5086dc91063061
      size: 795412065
    - path: ckpts/model_one_fold1.ckpt
      md5: 4a61881d00c16fdcceaff9160d6e1325
      size: 795412065
    - path: ckpts/model_one_fold2.ckpt
      md5: f92f592bf4d8e74f1a49e193c81a5246
      size: 795412065
    - path: ckpts/model_one_fold3.ckpt
      md5: 0fee8692971090d96dae831784cfe3e1
      size: 795412065
    - path: ckpts/model_one_fold4.ckpt
      md5: c69ca77ac2ae7034ba867807b4e39ae4
      size: 795412065
    - path: ckpts/model_three_fold0.ckpt
      md5: cfb1b4d36627ab4e9bc77bad9e4e298a
      size: 753548527
    - path: ckpts/model_three_fold1.ckpt
      md5: 45e2dfa7ee6907916539c1f7aef0aecd
      size: 753548527
    - path: ckpts/model_three_fold2.ckpt
      md5: 656ae2aae8ced258b98b674609faa386
      size: 753548527
    - path: ckpts/model_three_fold3.ckpt
      md5: a443b6c1bc04cb34b9ee184c5929d703
      size: 753548527
    - path: ckpts/model_three_fold4.ckpt
      md5: 0766b118ced3db8a31c9c6678b63a15f
      size: 753548527
    - path: ckpts/model_two_fold0.ckpt
      md5: 0eda6fbe46915f679a0854020e40f89b
      size: 782571809
    - path: ckpts/model_two_fold1.ckpt
      md5: 1b25e121b472954fdb018763b4ac51c7
      size: 782571809
    - path: ckpts/model_two_fold2.ckpt
      md5: c19d2c431b28cb00fc75df8f59ff96b8
      size: 782571809
    - path: ckpts/model_two_fold3.ckpt
      md5: 5c8515a50a899037ba334db6d15fe6d7
      size: 782571809
    - path: ckpts/model_two_fold4.ckpt
      md5: c5c73889f9df7dbdeda5a5589c259446
      size: 782571809
    - path: data/extra2/
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/pseudo_label.py
      md5: 70c8f4b302db6c7e3c38771be45e4eb0
      size: 2667
    params:
      params.yaml:
        pseudo_labeling:
          models:
          - one
          - two
          - three
          - four
          n_folds: 5
    outs:
    - path: data/extra.csv
      md5: ce7e96d202add6239fa8178310b49a13
      size: 10919999
  train_four_extra:
    cmd: python pipe/train_four_extra.py
    deps:
    - path: data/extra
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
    - path: data/extra.csv
      md5: 53b24e43fae8db27cbe091d184a0374c
      size: 21563472
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/train_four_extra.py
      md5: 4aa7b633afef1a700d688e44dc604a82
      size: 5998
    params:
      params.yaml:
        train_four_extra:
          name: four_extra
          seed: 1230
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: true
          arch: cait_s24_224
          pretrained: true
          epochs: 6
          bs: 64
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 4e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_four_extra_fold0.ckpt
      md5: 217f2170fcb70d7199bf70f9b07002a5
      size: 186579393
    - path: ckpts/model_four_extra_fold1.ckpt
      md5: 12bbe8e26802735df4ba52c5ec018946
      size: 186579393
    - path: ckpts/model_four_extra_fold2.ckpt
      md5: 3310f4af77fc813ea3f2c58dc392df9e
      size: 186579393
    - path: ckpts/model_four_extra_fold3.ckpt
      md5: f19abbfe492cc24930ddc2e247d5d8a9
      size: 186579393
    - path: ckpts/model_four_extra_fold4.ckpt
      md5: 16a48097cb9bfb797a34f0207013d959
      size: 186579393
    - path: metrics/model_four_extra.json
      md5: c0991de4ac2fc7615edaf25c0645d651
      size: 61
    - path: preds/model_four_extra_oof.npy
      md5: 52315795f385e469fb06e28088203f73
      size: 79128
  train_two_extra:
    cmd: python pipe/train_two_extra.py
    deps:
    - path: data/extra
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
    - path: data/extra.csv
      md5: ce7e96d202add6239fa8178310b49a13
      size: 10919999
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/train_two_extra.py
      md5: cb81887bad9f6e0f1ffc7802cd1b5d1b
      size: 5983
    params:
      params.yaml:
        train_two_extra:
          name: two_extra
          seed: 7591
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: true
          arch: swin_large_patch4_window7_224
          pretrained: true
          epochs: 6
          bs: 64
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 2e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_two_extra_fold0.ckpt
      md5: bed03407726b022960fd103c569cc642
      size: 782570529
    - path: ckpts/model_two_extra_fold1.ckpt
      md5: 370486fc6abb2d06dab985f90e92d3b6
      size: 782570529
    - path: ckpts/model_two_extra_fold2.ckpt
      md5: 1f4fd3f1a34394389e81ebe3f6923d4d
      size: 782570529
    - path: ckpts/model_two_extra_fold3.ckpt
      md5: 5c9a95b92d71454c650ad393fa338a7b
      size: 782570529
    - path: ckpts/model_two_extra_fold4.ckpt
      md5: d928f58add5d6ff9ae5e8e8eb3a81446
      size: 782570529
    - path: metrics/model_two_extra.json
      md5: 6402f38b422f8bb4c1c609d5859e2642
      size: 62
    - path: preds/model_two_extra_oof.npy
      md5: 20be3d6d1d21a31cb825f7657847579a
      size: 79128
  train_one_extra:
    cmd: python pipe/train_one_extra.py
    deps:
    - path: data/extra
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
    - path: data/extra.csv
      md5: 53b24e43fae8db27cbe091d184a0374c
      size: 21563472
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/train_one_extra.py
      md5: ecccbb75d198ccb5953566c081ea4ab3
      size: 5983
    params:
      params.yaml:
        train_one_extra:
          name: one_extra
          seed: 6921
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: true
          arch: swin_large_patch4_window12_384
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 2
          magn: 3
          sz: 384
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          lr: 6e-06
          warmup_epochs: 1
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_one_extra_fold0.ckpt
      md5: d3d4d9f72abd8479caef6b4ff9f3880f
      size: 795410785
    - path: ckpts/model_one_extra_fold1.ckpt
      md5: b122aa86a3eea67bb78131f9c17bef7d
      size: 795410785
    - path: ckpts/model_one_extra_fold2.ckpt
      md5: 39d8351ae18209621e1190818d11d6b3
      size: 795410785
    - path: ckpts/model_one_extra_fold3.ckpt
      md5: 2236e6292fad758fa7bddff04fa4a1d7
      size: 795410785
    - path: ckpts/model_one_extra_fold4.ckpt
      md5: 0be481f8f786ac081115be4707787117
      size: 795410785
    - path: metrics/model_one_extra.json
      md5: a77e5864909b52e6f092b93eba48402c
      size: 62
    - path: preds/model_one_extra_oof.npy
      md5: 7e6445741a8f9e0a84b0d26d3286137a
      size: 79128
  ensemble_extra:
    cmd: python pipe/ensemble_extra.py
    deps:
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/ensemble_extra.py
      md5: 39a9edded2adf0e4be9b8c3e8a571e88
      size: 1295
    - path: preds/model_four_extra_oof.npy
      md5: a9c1b57136384300ce66a5c37c501e63
      size: 79128
    - path: preds/model_one_extra_oof.npy
      md5: f042ca02bd3d436ab13f961b063007b4
      size: 79128
    - path: preds/model_two_extra_oof.npy
      md5: 0e4aed187ef25562438f323d3c178a5d
      size: 79128
    params:
      params.yaml:
        ensemble_extra:
          models:
          - one_extra
          - two_extra
          - four_extra
          n_folds: 5
    outs:
    - path: metrics/ensemble_extra.json
      md5: c70880fe4dff1771680d10145343bc05
      size: 22
  ensemble_final:
    cmd: python pipe/ensemble_final.py
    deps:
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/ensemble_final.py
      md5: 1d92fa9e850d9ab5a281a0fd0f58847e
      size: 3278
    - path: preds/model_five_oof.npy
      md5: 6bc67e7e0bfa64f0a022792cc6f60baf
      size: 79128
    - path: preds/model_four_extra2_oof.npy
      md5: 6f6e516b4149d750c16cd930f4b812f4
      size: 79128
    - path: preds/model_one_extra2_oof.npy
      md5: 7f32c9e9892854dcc7b44688bab4b819
      size: 79128
    - path: preds/model_three_extra2_oof.npy
      md5: 531113035ea2c0c434ef353791a7193f
      size: 79128
    - path: preds/model_two_extra2_oof.npy
      md5: 03b125ca657814c6ad906dca69f9fc42
      size: 79128
    params:
      params.yaml:
        ensemble_final:
          name: ensemble_final
          seed: 1010
          n_folds: 5
          models:
          - five
          - one_extra2
          - three_extra2
          - four_extra2
    outs:
    - path: ckpts/model_ensemble_final.joblib
      md5: a21905a19e407843f66ea0f5bc4d0df8
      size: 84984
    - path: metrics/model_ensemble_final.json
      md5: a4e3e3bc55ee28dcb1ee3e5df252f555
      size: 22
  train_three_extra:
    cmd: python pipe/train_three_extra.py
    deps:
    - path: data/extra
      md5: ab4e24fc3d00c4345d86a2647e55685b.dir
      size: 1998094758
      nfiles: 72776
    - path: data/extra.csv
      md5: 53b24e43fae8db27cbe091d184a0374c
      size: 21563472
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_10folds.csv
      md5: 2e136ecbf70718f80898b57cbd7fe878
      size: 660556
    - path: data/train_5folds.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/train_three_extra.py
      md5: bbc9ae7e376a212327e947a7de5d32eb
      size: 5999
    params:
      params.yaml:
        train_three_extra:
          name: three_extra
          seed: 9102
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: true
          arch: xcit_large_24_p8_224_dist
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 1e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_three_extra_fold0.ckpt
      md5: 118380eb6393e9fa7a3c9b3de2ce11fc
      size: 753547183
    - path: ckpts/model_three_extra_fold1.ckpt
      md5: 06a5ab5140d021bc3562a4ade1d21119
      size: 753547183
    - path: ckpts/model_three_extra_fold2.ckpt
      md5: e571e3ee3d39243c50d7603a12c42588
      size: 753547183
    - path: ckpts/model_three_extra_fold3.ckpt
      md5: 10ada413a592102f470c1a63ce164451
      size: 753547183
    - path: ckpts/model_three_extra_fold4.ckpt
      md5: a1b8a78dd2f59dbb7b0e2caaa69d9868
      size: 753547183
    - path: metrics/model_three_extra.json
      md5: 94d5fe040b73cab046affb4f6a736869
      size: 62
    - path: preds/model_three_extra_oof.npy
      md5: 6d720e59bf6d5c0e1b3b2d4ae795ffc0
      size: 79128
  download_extra_data2:
    cmd: kaggle competitions download -c dogs-vs-cats -p data/dogs-vs-cats
    outs:
    - path: data/dogs-vs-cats/dogs-vs-cats.zip
      md5: 9a0eeba8550340d9d09f7233b6dd46ee
      size: 851576689
  unzip_extra_data2:
    cmd: unzip data/dogs-vs-cats/dogs-vs-cats.zip -d data/dogs-vs-cats/ && unzip data/dogs-vs-cats/train.zip
      -d data/dogs-vs-cats/images/ && unzip data/dogs-vs-cats/test1.zip -d data/dogs-vs-cats/images/
    deps:
    - path: data/dogs-vs-cats/dogs-vs-cats.zip
      md5: 9a0eeba8550340d9d09f7233b6dd46ee
      size: 851576689
    outs:
    - path: data/dogs-vs-cats/images/
      md5: 8d6681ff19c24d13428c82bdc0b5d6a7.dir
      size: 857482337
      nfiles: 37500
    - path: data/dogs-vs-cats/sampleSubmission.csv
      md5: 24f47f82954761cf3b72a82190cd0203
      size: 88903
    - path: data/dogs-vs-cats/test1.zip
      md5: 3307177ca78b24cf44fbfff57637feba
      size: 284321224
    - path: data/dogs-vs-cats/train.zip
      md5: fd47d523fa82bb9c282b897b55be0442
      size: 569546721
  organize_extra_images2:
    cmd: mkdir data/extra2 && find data/dogs-vs-cats/ -name '*.jpg' -exec cp {} data/extra2/
      \;
    deps:
    - path: data/dogs-vs-cats/images/
      md5: 8d6681ff19c24d13428c82bdc0b5d6a7.dir
      size: 857482337
      nfiles: 37500
    outs:
    - path: data/extra2
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
  pseudo_labeling_extra2:
    cmd: python pipe/pseudo_label_extra2.py
    deps:
    - path: ckpts/model_four_fold0.ckpt
      md5: 01c4bf458c6dbe1e6d5975ca77ff66fa
      size: 186584705
    - path: ckpts/model_four_fold1.ckpt
      md5: 00ca31cd7ad9adbc3ee2147080b7c932
      size: 186584705
    - path: ckpts/model_four_fold2.ckpt
      md5: d696e0361dd66628d3cf043232299dd7
      size: 186584705
    - path: ckpts/model_four_fold3.ckpt
      md5: 0ccc7e97da81b1bf251daa12c1c62767
      size: 186584705
    - path: ckpts/model_four_fold4.ckpt
      md5: 965972516c3f48623803957b698dba0f
      size: 186584705
    - path: ckpts/model_one_fold0.ckpt
      md5: 6a2b03a6e33e672fcb53126c1f17d5fc
      size: 795416097
    - path: ckpts/model_one_fold1.ckpt
      md5: 4c2f10bedf14aff913f11a072e92d1cf
      size: 795416097
    - path: ckpts/model_one_fold2.ckpt
      md5: 5deb194fb1723f07f0d05fa59aa3f877
      size: 795416097
    - path: ckpts/model_one_fold3.ckpt
      md5: ab3b5e4b66c4b2a591b4da330c97a6ed
      size: 795416097
    - path: ckpts/model_one_fold4.ckpt
      md5: 868348601911c0d855a45ddf9db6c3f9
      size: 795416097
    - path: ckpts/model_three_fold0.ckpt
      md5: fabed792f76e5611a3f824053a89921e
      size: 753552559
    - path: ckpts/model_three_fold1.ckpt
      md5: 4d1e77588aee32f6010641f776c324da
      size: 753552559
    - path: ckpts/model_three_fold2.ckpt
      md5: 851b257d96188721316c12d734913af3
      size: 753552559
    - path: ckpts/model_three_fold3.ckpt
      md5: c6727f7950f6c500b20322c1e5ce2c38
      size: 753552559
    - path: ckpts/model_three_fold4.ckpt
      md5: 159807b07390c92518edd1df86f0da1f
      size: 753552559
    - path: ckpts/model_two_fold0.ckpt
      md5: d7c722510a13c59aa1a3eb927b484a5c
      size: 782575841
    - path: ckpts/model_two_fold1.ckpt
      md5: af20e7eb3387be81d1fede8716206e6b
      size: 782575841
    - path: ckpts/model_two_fold2.ckpt
      md5: cd5b9c919aac01c664d5e197b02d600b
      size: 782575841
    - path: ckpts/model_two_fold3.ckpt
      md5: bc5c7155212f7227729d50dff4a8feaa
      size: 782575841
    - path: ckpts/model_two_fold4.ckpt
      md5: cfbb6c441d02c45352cd6855d28ff07f
      size: 782575841
    - path: data/extra2/
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/pseudo_label_extra2.py
      md5: 907e04ada3a1800bddeab728dc324b7f
      size: 2703
    params:
      params.yaml:
        pseudo_labeling:
          models:
          - one
          - two
          - three
          - four
          n_folds: 5
    outs:
    - path: data/extra2.csv
      md5: 88b4925ae6d2265a732c1143750de61c
      size: 10916704
  train_two_extra2:
    cmd: python pipe/train_two_extra2.py
    deps:
    - path: data/extra2
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/extra2.csv
      md5: 88b4925ae6d2265a732c1143750de61c
      size: 10916704
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_two_extra2.py
      md5: 8e877f43ff34895ca1c686c46241e126
      size: 6066
    params:
      params.yaml:
        train_two_extra2:
          name: two_extra2
          seed: 7591
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: 2
          arch: swin_large_patch4_window7_224
          pretrained: true
          epochs: 6
          bs: 64
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 2e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_two_extra2_fold0.ckpt
      md5: b3c519ae488857da36fdacbf250725ad
      size: 782575841
    - path: ckpts/model_two_extra2_fold1.ckpt
      md5: 531eb074db67c135214b797b8fd8a47b
      size: 782575841
    - path: ckpts/model_two_extra2_fold2.ckpt
      md5: b352157f352479c09e8053378074ea1c
      size: 782575841
    - path: ckpts/model_two_extra2_fold3.ckpt
      md5: 70ffb350e20bb7743edbfab93577a45a
      size: 782575841
    - path: ckpts/model_two_extra2_fold4.ckpt
      md5: 86172bd255673d281f2dd09950a1a3a4
      size: 782575841
    - path: metrics/model_two_extra2.json
      md5: b67a24eb55db88bf75e8589f6c485aa9
      size: 62
    - path: preds/model_two_extra2_oof.npy
      md5: 03b125ca657814c6ad906dca69f9fc42
      size: 79128
  train_four_extra2:
    cmd: python pipe/train_four_extra2.py
    deps:
    - path: data/extra2
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/extra2.csv
      md5: 88b4925ae6d2265a732c1143750de61c
      size: 10916704
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_four_extra2.py
      md5: 46e587b1aa11de5489280ce386285978
      size: 6067
    params:
      params.yaml:
        train_four_extra2:
          name: four_extra2
          seed: 1230
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: 2
          arch: cait_s24_224
          pretrained: true
          epochs: 6
          bs: 128
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 4e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_four_extra2_fold0.ckpt
      md5: 6e9a39283b596b503fd090ec07c1f134
      size: 186584705
    - path: ckpts/model_four_extra2_fold1.ckpt
      md5: a52c1aec9027aadb3c5c4428476056c3
      size: 186584705
    - path: ckpts/model_four_extra2_fold2.ckpt
      md5: 3829d33eb8bfe088eca41ab524df49a6
      size: 186584705
    - path: ckpts/model_four_extra2_fold3.ckpt
      md5: 23d649ce17ca9a078818a630f79b56c6
      size: 186584705
    - path: ckpts/model_four_extra2_fold4.ckpt
      md5: 7ef9e2844093c4f89b549f119ca35c2b
      size: 186584705
    - path: metrics/model_four_extra2.json
      md5: 7f805fc2a0457f21fc0b5348bc856a25
      size: 62
    - path: preds/model_four_extra2_oof.npy
      md5: 6f6e516b4149d750c16cd930f4b812f4
      size: 79128
  train_one_extra2:
    cmd: python pipe/train_one_extra2.py
    deps:
    - path: data/extra2
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/extra2.csv
      md5: 88b4925ae6d2265a732c1143750de61c
      size: 10916704
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_one_extra2.py
      md5: 9f09f8b0815bb5f0bfa45a40b034d1d2
      size: 6067
    params:
      params.yaml:
        train_one_extra2:
          name: one_extra2
          seed: 6921
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: 2
          arch: swin_large_patch4_window12_384
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 2
          magn: 3
          sz: 384
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          lr: 6e-06
          warmup_epochs: 1
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_one_extra2_fold0.ckpt
      md5: 14869b5a6d989a049fd6f2e470516262
      size: 795416097
    - path: ckpts/model_one_extra2_fold1.ckpt
      md5: e51ba524572dd08cf9b032d8b69671ca
      size: 795416097
    - path: ckpts/model_one_extra2_fold2.ckpt
      md5: 2efa0a3365b18d4b82b640997948b6ff
      size: 795416097
    - path: ckpts/model_one_extra2_fold3.ckpt
      md5: 038b0df436b315aad322d6ac1d7608cb
      size: 795416097
    - path: ckpts/model_one_extra2_fold4.ckpt
      md5: 79a75854937a018eaf68f082b1658261
      size: 795416097
    - path: metrics/model_one_extra2.json
      md5: c55cc3b30770b358b96e3bca04941c69
      size: 61
    - path: preds/model_one_extra2_oof.npy
      md5: 7f32c9e9892854dcc7b44688bab4b819
      size: 79128
  train_three_extra2:
    cmd: python pipe/train_three_extra2.py
    deps:
    - path: data/extra2
      md5: 94b80c06514fcd9baa430c730f9ded9c.dir
      size: 857482337
      nfiles: 37500
    - path: data/extra2.csv
      md5: 88b4925ae6d2265a732c1143750de61c
      size: 10916704
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_three_extra2.py
      md5: 44796adfe7fee567091c6442491832a6
      size: 6068
    params:
      params.yaml:
        train_three_extra2:
          name: three_extra2
          seed: 9102
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: 2
          arch: xcit_large_24_p8_224_dist
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 1
          magn: 5
          sz: 224
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          warmup_epochs: 1
          lr: 1e-05
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_three_extra2_fold0.ckpt
      md5: 23a061fb8677bc7dbef48f6cede308a6
      size: 753552559
    - path: ckpts/model_three_extra2_fold1.ckpt
      md5: 9bb55fb0348302d963c99f1a255c8792
      size: 753552559
    - path: ckpts/model_three_extra2_fold2.ckpt
      md5: b6424ae35cb5341cd6a464b578a4e428
      size: 753552559
    - path: ckpts/model_three_extra2_fold3.ckpt
      md5: 52aba2a2627fe4065d3553934876d408
      size: 753552559
    - path: ckpts/model_three_extra2_fold4.ckpt
      md5: 26c1b6767bbea432a71c2dafc9372321
      size: 753552559
    - path: metrics/model_three_extra2.json
      md5: e1e27b3355b07a96e12b91a4d223597f
      size: 62
    - path: preds/model_three_extra2_oof.npy
      md5: 531113035ea2c0c434ef353791a7193f
      size: 79128
  train_zero:
    cmd: python pipe/train_zero.py
    deps:
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds_all.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/train_zero.py
      md5: 34e0976cb6b388faa808b746b05455d2
      size: 5911
    params:
      params.yaml:
        train_zero:
          name: zero
          seed: 5899
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          arch: swin_large_patch4_window12_384
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 2
          magn: 3
          sz: 384
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          lr: 1e-05
          warmup_epochs: 1
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_zero_fold0.ckpt
      md5: b9a8b3f8a844eea6650003f1ffd097bd
      size: 795415713
    - path: ckpts/model_zero_fold1.ckpt
      md5: f4d075f141d4256a7a6bcac3d9415cf9
      size: 795415713
    - path: ckpts/model_zero_fold2.ckpt
      md5: 813615b89b2de080471348b2c13dff83
      size: 795415713
    - path: ckpts/model_zero_fold3.ckpt
      md5: cd8f167d89c6cd4802db4f6c3118e948
      size: 795415713
    - path: ckpts/model_zero_fold4.ckpt
      md5: 88e6dcd103de570a6b34ecc2a29b3f46
      size: 795415713
    - path: metrics/model_zero.json
      md5: 190911c42bcb8b489cee112ebf112e01
      size: 62
    - path: preds/model_zero_oof.npy
      md5: 5bdf9acc21a35bacdcfbd604578b5981
      size: 79128
  remove_hardest_samples:
    cmd: python pipe/remove_hardest_samples.py
    deps:
    - path: ckpts/model_zero_fold0.ckpt
      md5: b9a8b3f8a844eea6650003f1ffd097bd
      size: 795415713
    - path: ckpts/model_zero_fold1.ckpt
      md5: f4d075f141d4256a7a6bcac3d9415cf9
      size: 795415713
    - path: ckpts/model_zero_fold2.ckpt
      md5: 813615b89b2de080471348b2c13dff83
      size: 795415713
    - path: ckpts/model_zero_fold3.ckpt
      md5: cd8f167d89c6cd4802db4f6c3118e948
      size: 795415713
    - path: ckpts/model_zero_fold4.ckpt
      md5: 88e6dcd103de570a6b34ecc2a29b3f46
      size: 795415713
    - path: data/train_folds_all.csv
      md5: df60fb7c97941742af389960321d6f97
      size: 660556
    - path: pipe/remove_hardest_samples.py
      md5: 20ede014d5f5d26cacaecc0fd9f854c4
      size: 2427
    params:
      params.yaml:
        remove_hardest_samples:
          pct_to_keep: 0.9
    outs:
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
  train_five:
    cmd: python pipe/train_five.py
    deps:
    - path: ckpts/model_one_extra2_fold0.ckpt
      md5: 14869b5a6d989a049fd6f2e470516262
      size: 795416097
    - path: ckpts/model_one_extra2_fold1.ckpt
      md5: e51ba524572dd08cf9b032d8b69671ca
      size: 795416097
    - path: ckpts/model_one_extra2_fold2.ckpt
      md5: 2efa0a3365b18d4b82b640997948b6ff
      size: 795416097
    - path: ckpts/model_one_extra2_fold3.ckpt
      md5: 038b0df436b315aad322d6ac1d7608cb
      size: 795416097
    - path: ckpts/model_one_extra2_fold4.ckpt
      md5: 79a75854937a018eaf68f082b1658261
      size: 795416097
    - path: data/train
      md5: 065c7f4be0d67e5175f532982b56cb52.dir
      size: 1039930050
      nfiles: 9912
    - path: data/train_folds.csv
      md5: 3ee868075576e4eb85f749f25cf7e346
      size: 728579
    - path: pipe/train_five.py
      md5: 7ddc343b57f1b5fa2f3f00bfc0ffdf06
      size: 5982
    params:
      params.yaml:
        train_one_extra2:
          name: one_extra2
          seed: 6921
          n_folds: 5
          fold: -1
          metric: rmse
          metric_mode: min
          train_data: data/train
          use_extra_images: 2
          arch: swin_large_patch4_window12_384
          pretrained: true
          epochs: 6
          bs: 16
          auto_batch_size: false
          accumulate_grad_batches: 1
          precision: bf16
          use_normalize: true
          n_tfms: 2
          magn: 3
          sz: 384
          use_mix: 0
          mix_p: 0.0
          resize: -1
          dropout: 0.0
          wd: 0.0
          label_smoothing: 0.1
          loss: bce_with_logits
          opt: adamw
          sched: cosine
          lr: 6e-06
          warmup_epochs: 1
          auto_lr: false
          mom: 0.9
    outs:
    - path: ckpts/model_five_fold0.ckpt
      md5: 8a0ef8d9a79ba33042280565a620b369
      size: 29503797
    - path: ckpts/model_five_fold1.ckpt
      md5: 80ff1f68756588ad2079f3ef3aa6c90d
      size: 29306869
    - path: ckpts/model_five_fold2.ckpt
      md5: 99b7a3ea37f778f0357989c95caeae23
      size: 30685365
    - path: ckpts/model_five_fold3.ckpt
      md5: 4628c949ed648ad4be9baff12590f191
      size: 29417641
    - path: ckpts/model_five_fold4.ckpt
      md5: 96fef0c53ca4bc785f8a753e0805ede2
      size: 29897653
    - path: metrics/model_five.json
      md5: 7ff8efd3c7d196befb492b6d1065d518
      size: 61
    - path: preds/model_five_oof.npy
      md5: 6bc67e7e0bfa64f0a022792cc6f60baf
      size: 79128
